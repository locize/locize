!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t){var n,o,i={top:0,left:0,right:0,bottom:0},r=t&&t.ownerDocument;if(!(n=r&&r.documentElement))return i;"undefined"!==e(t.getBoundingClientRect)&&(i=t.getBoundingClientRect()),o=function(e){return null!=(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(r);var a=i.top+o.pageYOffset-n.clientTop,l=i.left+o.pageXOffset-n.clientLeft;return{top:a,left:l,right:l+(i.right-i.left),bottom:a+(i.bottom-i.top)}}function n(e,t){return e&&e.getAttribute&&e.getAttribute(t)}function o(e){var t;return function e(o){var i=n(o,"i18next-options");if(i||(i=n(o,"data-i18next-options")),i||(i=n(o,"i18n-options")),i||(i=n(o,"data-i18n-options")),i){var r={};try{r=JSON.parse(i)}catch(e){}r.ns&&(t=r.ns)}t||(t=n(o,"i18next-ns")),t||(t=n(o,"data-i18next-ns")),t||(t=n(o,"i18n-ns")),t||(t=n(o,"data-i18n-ns")),!t&&o.parentElement&&e(o.parentElement)}(e),t}function i(e){return function(n){var i=function(e){if(e.srcElement&&1===e.srcElement.nodeType)return e.srcElement.getAttribute&&""===e.srcElement.getAttribute("ignorelocizeeditor")?null:e.srcElement;var n;if(e.originalEvent&&e.originalEvent.explicitOriginalTarget)n=e.originalEvent.explicitOriginalTarget;else{var o=e.srcElement;if(o.getAttribute&&""===o.getAttribute("ignorelocizeeditor"))return null;for(var i,r=e.pageX,a=e.pageY,l=0,s=0;s<o.childNodes.length;s++){var d=o.childNodes[s],g=t(d);1===d.nodeType&&g.bottom<a&&(l=s+1),!i&&g.top+(d.clientHeight||0)>a&&(i=s)}l+1>o.childNodes.length&&(l=o.childNodes.length-1),i||(i=o.childNodes.length);for(var u=l;u<i;u++){var c=o.childNodes[u];if(t(c).left>r)break;c&&8!==c.nodeType&&(n=c)}}return n}(n);if(!i)return{};n.preventDefault(),n.stopPropagation();var r=function(e){var t=e.textContent||e.text&&e.text.innerText||e.placeholder;if("string"==typeof t)return t.replace(/\n +/g,"").trim()}(i),a=i.getBoundingClientRect(),l=a.top,s=a.left,d=a.width,g=a.height,u=window.getComputedStyle(i,null),c=parseFloat(u.getPropertyValue("padding-top")),f=parseFloat(u.getPropertyValue("padding-bottom")),p=parseFloat(u.getPropertyValue("padding-right")),m=parseFloat(u.getPropertyValue("padding-left")),b=u.getPropertyValue("box-sizing");e({tagName:i.tagName,text:r,ns:o(i),box:{top:l,left:s,width:"border-box"===b?d:d-p-m,height:"border-box"===b?g:g-c-f},style:u.cssText})}}var r,a,l,s;window.addEventListener("message",(function(e){"isLocizeEnabled"===e.data.message?(r||(r=e.source,a=e.origin,l=i((function(e){r.postMessage({message:"clickedElement",payload:e},a)}))),r.postMessage({message:"locizeIsEnabled",enabled:!0},e.origin)):"turnOn"===e.data.message?(s||document.body.addEventListener("click",l,!0),s=!0,r.postMessage({message:"turnedOn"},a)):"turnOff"===e.data.message&&(s&&document.body.removeEventListener("click",l,!0),s=!1,r.postMessage({message:"turnedOff"},a))}))}));
