!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).locize={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){var n={top:0,left:0,right:0,bottom:0},o=e&&e.ownerDocument,i=o&&o.documentElement;if(!i)return n;"undefined"!==t(e.getBoundingClientRect)&&(n=e.getBoundingClientRect());var r=function(e){return null!=(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(o),a=n.top+r.pageYOffset-i.clientTop,s=n.left+r.pageXOffset-i.clientLeft;return{top:a,left:s,right:s+(n.right-n.left),bottom:a+(n.bottom-n.top)}}function o(e,t){return e&&e.getAttribute&&e.getAttribute(t)}function i(e){var t=o(e,"data-i18n");return t||(e.nodeType===window.Node.TEXT_NODE&&e.parentElement?i(e.parentElement):void 0)}function r(e){var t;return function e(n){var i=o(n,"i18next-options");if(i||(i=o(n,"data-i18next-options")),i||(i=o(n,"i18n-options")),i||(i=o(n,"data-i18n-options")),i){var r={};try{r=JSON.parse(i)}catch(e){}r.ns&&(t=r.ns)}t||(t=o(n,"i18next-ns")),t||(t=o(n,"data-i18next-ns")),t||(t=o(n,"i18n-ns")),t||(t=o(n,"data-i18n-ns")),!t&&n.parentElement&&e(n.parentElement)}(e),t}function a(e){return function(t){var o=function(e){if(e.srcElement&&1===e.srcElement.nodeType&&("BUTTON"===e.srcElement.nodeName||"INPUT"===e.srcElement.nodeName))return e.srcElement.getAttribute&&""===e.srcElement.getAttribute("ignorelocizeeditor")?null:e.srcElement;var t;if(e.originalEvent&&e.originalEvent.explicitOriginalTarget)t=e.originalEvent.explicitOriginalTarget;else{var o=e.srcElement;if(o.getAttribute&&""===o.getAttribute("ignorelocizeeditor"))return null;for(var i,r=e.pageX,a=e.pageY,s=0,d=0;d<o.childNodes.length;d++){var l=o.childNodes[d],f=n(l);1===l.nodeType&&f.bottom<a&&(s=d+1),!i&&f.top+(l.clientHeight||0)>a&&(i=d)}s+1>o.childNodes.length&&(s=o.childNodes.length-1),i||(i=o.childNodes.length);for(var u=s;u<i;u++){var c=o.childNodes[u];if(n(c).left>r)break;c&&8!==c.nodeType&&(t=c)}}return t}(t);if(!o)return{};t.preventDefault(),t.stopPropagation();var a=function(e){var t=e.textContent||e.text&&e.text.innerText||e.placeholder;if("string"==typeof t)return t.replace(/\n +/g,"").trim()}(o),s=i(o),d=o.getBoundingClientRect?o:o.parentElement,l=d.getBoundingClientRect(),f=l.top,u=l.left,c=l.width,g=l.height,p=window.getComputedStyle(d,null),m=parseFloat(p.getPropertyValue("padding-top")),y=parseFloat(p.getPropertyValue("padding-bottom")),v=parseFloat(p.getPropertyValue("padding-right")),b=parseFloat(p.getPropertyValue("padding-left")),h=p.getPropertyValue("box-sizing");e({tagName:d.tagName,text:a,key:s,ns:r(o),box:{top:f,left:u,width:"border-box"===h?c:c-v-b,height:"border-box"===h?g:g-m-y},style:p.cssText})}}var s,d,l,f,u,c,g=!0;try{g=self!==top}catch(e){}function p(e){u=e}var m=[];function y(e,t,n,o){var i={message:"added",lng:e,ns:t,key:n,value:o};s?s.postMessage(i,d):m.push(i)}var v={type:"3rdParty",init:function(e){p((function(t){t.updated.forEach((function(t){var n=t.lng,o=t.ns,i=t.key,r=t.data;e.addResource(n,o,i,r.value,{silent:!0}),e.emit("editorSaved")}))})),g&&(e.options.missingKeyHandler=function(e,t,n,o,i,r){i||y(e,t,n,o)})}};"undefined"!=typeof window&&window.addEventListener("message",(function(e){if("isLocizeEnabled"===e.data.message)s||(s=e.source,d=e.origin,l=a((function(e){s.postMessage({message:"clickedElement",payload:e},d)}))),s.postMessage({message:"locizeIsEnabled",enabled:!0},e.origin),m.forEach((function(t){s.postMessage(t,e.origin)})),m=[];else if("turnOn"===e.data.message){if(c)return s.postMessage({message:"forcedOff"},d);f||window.document.body.addEventListener("click",l,!0),f=!0,s.postMessage({message:"turnedOn"},d)}else if("turnOff"===e.data.message){if(c)return s.postMessage({message:"forcedOff"},d);f&&window.document.body.removeEventListener("click",l,!0),f=!1,s.postMessage({message:"turnedOff"},d)}else if("committed"===e.data.message){var t=e.data.payload;window.locizeSavedHandler&&window.locizeSavedHandler(t),u&&u(t)}}));e.addLocizeSavedHandler=p,e.locizePlugin=v,e.onAddedKey=y,e.turnOff=function(){return c=!0,f&&window.document.body.removeEventListener("click",l,!0),f=!1,s&&s.postMessage({message:"turnedOff"},d),s&&s.postMessage({message:"forcedOff"},d),c},e.turnOn=function(){return c=!1,f||window.document.body.addEventListener("click",l,!0),f=!0,s&&s.postMessage({message:"turnedOn"},d),c},Object.defineProperty(e,"__esModule",{value:!0})}));
